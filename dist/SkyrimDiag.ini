[SkyrimDiag]
; How often the plugin schedules a main-thread heartbeat update task (ms)
HeartbeatIntervalMs=100

; Blackbox ring buffer capacity (must match shared header constant in this MVP)
; EventCapacity=65536

; Crash hook (VEH). Does not consume the exception.
; 0 = Off
; 1 = Blacklist: record all exceptions except known-benign (C++ SEH, debugger, OutputDebugString)
; 2 = All exceptions (can false-trigger; use only if you understand the trade-off)
; Safety guard: CrashHookMode=2 is ignored unless EnableUnsafeCrashHookMode2=1.
CrashHookMode=1
EnableUnsafeCrashHookMode2=0

; Event toggles (MVP: menu events implemented)
LogMenus=1

; Resource tracking (best-effort):
; Logs recent asset loads like meshes/*.nif and animations/*.hkx into the dump so the viewer can map them to MO2 mods.
; Performance note:
;   - This installs a lightweight hook for loose-file opens and filters to nif/hkx/tri only.
;   - On some setups (heavy streaming / many loose files), this can add small overhead.
;   - If you suspect micro-stutters, try setting EnableResourceLog=0 first.
EnableResourceLog=1
; Adaptive resource-log throttling:
; If loose-file bursts are very high, sample resource-open events to reduce hook overhead.
; Keep enabled for large modpacks unless you need maximum raw resource event density.
EnableAdaptiveResourceLogThrottle=1
ResourceLogThrottleHighWatermarkPerSec=1500
ResourceLogThrottleMaxSampleDivisor=8

; Performance hitch detection (best-effort):
; If the main thread stalls for too long, we record a "PerfHitch" event.
; This helps identify stutters/FPS drops and correlate with recent resource loads.
; Performance note:
;   - This is designed to be very low overhead, but you can disable it if needed.
EnablePerfHitchLog=1
; Presets (recommended starting points):
;   - Light (more sensitive, more noise):       Threshold=150, Cooldown=1500
;   - Default (balanced; recommended):          Threshold=250, Cooldown=3000
;   - Conservative (only big stutters):         Threshold=500, Cooldown=5000
; Notes:
;   - This is NOT an FPS meter. It detects "main-thread stalls" by seeing when scheduled heartbeat updates run late.
;   - GPU-bound low FPS may not show up as PerfHitch. Script/IO/asset stalls are more likely to show.
PerfHitchThresholdMs=250
PerfHitchCooldownMs=3000

; Auto-start the helper when Skyrim launches (recommended for MO2 users).
; Place SkyrimDiagHelper.exe next to SkyrimDiag.dll (same SKSE/Plugins folder),
; or set HelperExe to an absolute path.
AutoStartHelper=1
HelperExe=SkyrimDiagHelper.exe

; Optional: in-game test hotkeys (OFF by default).
; Ctrl+Shift+F10 -> intentional crash (for validating crash capture)
; Ctrl+Shift+F11 -> intentional hang   (for validating hang detection + WCT/dump)
EnableTestHotkeys=0
